<!-- 
Tailwindのおまじない
cd frontend
npx tailwindcss -i ./css/style.css -o ./css//twind.css --watch
-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="css/twind.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pattaya&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <title>ログイン｜ToryDory</title>
    <link rel="icon" href="image/marulogo.ico" />

    <script type="text/javascript" src="/js/general.js"></script>
    <script type="text/javascript" src="/js/api.js"></script>
  </head>
  <body class="bg-slate-300">
    <div id="header" class="relative h-[56px]xl:h-[72px]">
      <div>
        <div class="bg-[#8ECAE6] h-5 xl:h-6"></div>
        <div class="bg-[#219EBC] h-4 xl:h-5"></div>
        <div class="bg-[#126782] h-3 xl:h-4"></div>
        <div class="bg-[#023047] h-2 xl:h-3"></div>
      </div>
      <div
        class="flex ml-1 mr-1 xl:ml-3 xl:mr-3 absolute top-1 xl:top-1 xl:left-0"
      >
        <img
          src="image\header_logo_1.svg"
          alt="ヘッダーロゴ"
          class="h-10 xl:h-12"
        />
        <h1
          class="text-4xl xl:text-5xl font-pattaya ml-1 xl:ml-2 pt-1 xl:pt-0 text-white"
        >
          ToryDory
        </h1>
        <img
          src="image\header_island.svg"
          alt="ヘッダー島"
          class="h-10 xl:h-12 ml-2 xl:ml-3"
        />
      </div>
    </div>
    <div id="main" class="mb-6 xl:mb-4 relative">
      <div class="w-full">
        <img src="image\Hero.svg" alt="ヒーロー画像" />
      </div>
      <div
        class="absolute w-fit xl:w-fit scale-100 xl:scale-150 top-0 xl:top-auto bottom-12 xl:bottom-20 right-16 xl:right-0 left-auto xl:left-[62%]"
      >
        <div id="megs" style="color: red">&nbsp;</div>
        <label
          class="font-nsjp font-semibold xl:mb-1 text-sm xl:text-2xl text-slate-800"
        >
          メールアドレス
        </label>
        <br />
        <input
          type="email"
          class="border-4 shadow border-slate-600 w-[120%] xl:w-[16vw] rounded"
          id="email"
          name="email"
          required
        />
        <br />
        <label
          class="font-nsjp font-semibold xl:mb-1 text-sm xl:text-2xl text-slate-800"
        >
          パスワード
        </label>
        <br />
        <input
          type="password"
          class="border-4 shadow border-slate-600 w-[120%] xl:w-[16vw] rounded"
          id="password"
          name="password"
          required
        />
        <div class="mt-6 justify ml-auto text-center">
          <a href="makelog.html">
            <button
              onclick="login()"
              class="shadow-md w-fit pl-[1vw] pr-[1vw] pb-1 bg-[#FFB703] border-4 border-[#FB8500] font-nsjp font-semibold text-[#023047] rounded"
            >
              ログイン
            </button>
          </a>
          <a href="signup.html" class="ml-8">
            <button
              class="shadow-md w-fit pl-[1vw] pr-[1vw] pb-1 bg-[#8ECAE6] border-4 border-white font-nsjp font-semibold text-[#023047] rounded"
            >
              新規登録
            </button>
          </a>
        </div>
      </div>
    </div>
    <div id="footer" class="flex items-center w-fit mx-auto mb-4">
      <img
        src="image/marulogo.svg"
        alt="marulogo"
        class="h-6 xl:h-8 mr-1 xl:mr-2"
      />
      <p class="text-center text-[#023047] font-nsjp text-[50%] xl:text-[100%]">
        ©2024 Nishibori Sorachi All rights reserved.
      </p>
    </div>
  </body>

  <script>
    if (checkLogin()) {
      location.href = "/index.html";
    }

    const login = () => {
      // フォームの値を取得
      // .trim()で前後の空白を削除
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;

      // メッセージを表示するための要素を取得
      const megsBox = document.getElementById("megs");

      // 全ての項目が入力されているかチェック
      if (email === "" || password === "") {
        megsBox.innerText = "全ての項目を入力してください";
        return;
      }

      // APIにリクエストを送信
      loginApi(email, password)
        .then((data) => {
          location.href = "/index.html";
        })
        .catch((error) => {
          megsBox.innerText = error.message;
        });
    };
  </script>
</html>
